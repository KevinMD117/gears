services:
  # https://stackoverflow.com/a/65922105
  sh: # docker-compose run sh
    image: physino/gears
    command: /usr/bin/bash
    hostname: Geant4-11.0.2 # https://stackoverflow.com/a/54700656
    # https://gist.github.com/paul-krohn/e45f96181b1cf5e536325d1bdee6c949
    environment:
      - DISPLAY=host.docker.internal:0
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix
      - .:/root/gears
  site:
    image: jekyll/jekyll
    # --force_polling: needed in bash in windows to watch for file changes
    # --livereload: let a browser to reload when the site is regenerated
    command: jekyll serve --incremental --livereload --force_polling
    ports:
      # port for http service
      - 4000:4000
      # port for livereload service. --livereload won't work without it
      - 35729:35729
    volumes:
      - .:/srv/jekyll
